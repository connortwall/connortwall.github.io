<!DOCTYPE HTML>
<!--suppress ALL -->
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-48NR9YM9PH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-48NR9YM9PH');
    </script>
    <title>Connor Wall Portfolio - Personal Action RPG Project</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <link rel="stylesheet" href="assets/css/tomorrow-night.min.css">
    <link rel="stylesheet" href="assets/css/sunburst.css">
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css"/>
    </noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header" class="alt">
        <a href="index.html" class="logo"><strong>Connor Wall</strong> <span>Portfolio</span></a>
        <nav>
            <a href="#menu">Menu</a>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <ul class="actions stacked">
            <li><a href="index.html" class="button fit">Home</a></li>
        </ul>
        <ul class="links">
            <li><a href="gamedesign.html"><span class="icon solid fas fa-dice major"></span> Game Design <span
                    class="icon solid fas fa-dice major"></span></a></li>
            <li><a href="writtenwork.html"><span class="icon solid fas fa-pencil-alt major style1"></span> Written Work
                <span class="icon solid fas fa-pencil-alt major style1"></span></a></li>
            <li><a href="coding.html"><span class="icon solid fas fa-code major style1"></span> Coding <span
                    class="icon solid fas fa-code major style1"></span></a></li>
            <li><a href="visualdesign.html"><span class="icon solid fas fa-pen-fancy major style1"></span> Visual Art
                <span class="icon solid fas fa-pen-fancy major style1"></span></a></li>

        </ul>
        <ul class="actions stacked">
            <li><a href="CV.html" class="button primary fit icon solid fa-clipboard-list">
										<span style="color: #B664B0; background-image: linear-gradient(135deg, #6699FF 0%, #FF3366 100%);
										 -webkit-background-clip: text; -webkit-text-fill-color:transparent; -webkit-box-decoration-break: clone;
										background-repeat: no-repeat;">CV<span class="label"></span>
										</span>
            </a></li>
        </ul>
        <ul class="icons">
            <li><a href="https://github.com/connortwall" class="icon brands alt fa-github"><span
                    class="label">GitHub</span></a></li>
            <li><a href="https://www.linkedin.com/in/connortwall/" class="icon brands alt fa-linkedin-in"><span
                    class="label">LinkedIn</span></a></li>
            <li><a href="https://connorthewall.itch.io" class="icon solid alt fa-gamepad"><span
                    class="label">Itch.io</span></a></li>
        </ul>
    </nav>

    <!-- Main -->
    <section id="banner" class="major">
        <!-- Title -->
        <div class="inner">
                    <span class="image">
                        <img src="uploads/ConnorWall_Portfolio/Game_Design/Personal_RPG/Screenshot_0.png" alt=""/></span>
            <header class="major">
                <h2>
										<span style="font-size: 150%;">
											Personal Action RPG Project
										</span>
                </h2>
            </header>
            <p style="font-size: 150%">An action-RPG game, adapted from my original screenplay <a href="writtenwork.html"> Quipu</a>.</p>
            <ul class="actions special" style="flex-direction: row; flex-wrap: wrap">
              <li><a href="https://github.com/connortwall/Personal-RPG-Project/tree/main/Assets/Scripts" class="button icon solid brands fa-github">Github (Unity)</a>
                </li>
                </ul>

        </div>
    </section>
    <div id="main" class="alt">
        <!-- Intro -->
        <section id="intro">
            <div class="inner">
                <header class="major">
                    <h1>Intro</h1>
                    <h2>Timeframe: 3 months (Unity) + 2 months (Unreal 5.2)</h2>
                </header>
                <p style="font-size: 150%">I solo developed a 3rd-person souls-like combat, stylized, action RPG game in <b>Unity</b> and <b>Unity Version Control</b> using Unity asset store assets.
                    I am now restructuring in <b>Unreal 5.2</b>, integrating metahumans, environment foliage, and
                    Niagara effects into the UI and overall game. My goal is to polish gameplay feel in Unreal while adding storyline "beats"
                    for an initial story arc. </p>
                <b>Primary features include:</b>
                    <li>Modular weapon combat (staggering, stat-based blocking, stamina-based parries)</li>
                    <li>Responsive item inventory</li>
                    <li>Enemies</li>
                    <li>Player + Enemy stats</li>
                    <li>Consumables</li>
                    <li>UI</li>
                    <li>Enemy Combat + Detection AI</li>
                    <li>Level event triggers</li>
                    <li>(and more)...</li>
                <br>
            </div>
        </section>


        <!-- Project Description -->
        <section class="pp-contents">
            <div class="inner">
                <header class="major">
                    <h1>Game Programming (Click)</h1>
                    <h2>GIFs will be re-uploaded July 20!!!</h2>
                </header>
                <!-- Enemy AI -->
                <div class="accordion">
                    <i class="fas fa-brain" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Enemy AI</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed an enemy AI combat system with several states.</p>
                    <li>Idle State: enemies patrol unaware</li>
                    <li>Ambush State: enemies lie stationary, unaware, get up and react</li>
                    <li>Combat State: enemies stand guard</li>
                    <li>Pursue Target State: enemies chase player</li>
                    <li>Attack State: enemy attacks player</li>
                    <li>Boss Combat State: boss switches attack animations based on state change</li>
                    <br>

                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Attack State</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates the code used while an enemy is attacking the player</p>
                        <pre class="prettyprint lang-csharp">
public class AttackState : State
{
    public RotateTowardsTargetState rotateTowardsTargetState;
    public CombatStanceState combatStanceState;
    public PursueTargetState pursueTargetState;
    public EnemyAttackAction currentAttack;

    private bool willDoComboOnNextAttack = false;
    public bool hasPerformedAttack = false;
    public override State Tick(EnemyManager enemyManager, EnemyStatsManager enemyStatsManager, EnemyAnimationManager enemyAnimationManager)
    {
        float distanceFromTarget = Vector3.Distance(enemyManager.currentTarget.transform.position,
            enemyManager.transform.position);
        RotateTowardsTargetWhileAttacking(enemyManager);

        if (distanceFromTarget > enemyManager.maximumAggroRadius)
        {
            return pursueTargetState;
        }

        if (willDoComboOnNextAttack && enemyManager.canDoCombo)
        {
            AttackTargetWithCombo(enemyAnimationManager, enemyManager);
        }

        if (!hasPerformedAttack)
        {
            AttackTarget(enemyAnimationManager, enemyManager);
            RollForComboChance(enemyManager);
        }

        if (willDoComboOnNextAttack && hasPerformedAttack)
        {
            return this; // goes back to perform combo
        }

        // always recenter to target player
        return rotateTowardsTargetState;

    }

    private void AttackTarget(EnemyAnimationManager enemyAnimationManager, EnemyManager enemyManager)
    {
        enemyAnimationManager.animator.SetBool("isUsingRightHand", currentAttack.isRightHandAction);
        enemyAnimationManager.animator.SetBool("isUsingLeftHand", !currentAttack.isRightHandAction);

        enemyAnimationManager.PlayTargetAnimation(currentAttack.actionAnimation, true);
        enemyAnimationManager.PlayWeaponTrailFX();
        // only regular attacks have combo revoery ties
        enemyManager.currentRecoveryTime = currentAttack.recoveryTime;
        hasPerformedAttack = true;
    }
    private void AttackTargetWithCombo(EnemyAnimationManager enemyAnimationManager, EnemyManager enemyManager)
    {
        enemyAnimationManager.animator.SetBool("isUsingRightHand", currentAttack.isRightHandAction);
        enemyAnimationManager.animator.SetBool("isUsingLeftHand", !currentAttack.isRightHandAction);
        willDoComboOnNextAttack = false;
        enemyAnimationManager.PlayTargetAnimation(currentAttack.actionAnimation, true);
        enemyAnimationManager.PlayWeaponTrailFX();
        enemyManager.currentRecoveryTime = currentAttack.recoveryTime;
        currentAttack = null;
    }
    private void RotateTowardsTargetWhileAttacking(EnemyManager enemyManager)
    {

        // rotate manually
        if (enemyManager.canRotate && enemyManager.isInteracting)
        {
            Vector3 direction = enemyManager.currentTarget.transform.position - enemyManager.transform.position;
            direction.y = 0;
            direction.Normalize();

            if (direction == Vector3.zero)
            {
                direction = transform.forward;
            }

            Quaternion targetRotation = Quaternion.LookRotation(direction);
            enemyManager.transform.rotation = Quaternion.Slerp(transform.rotation,targetRotation, enemyManager.rotationSpeed / Time.deltaTime);
        }
        // want a hybrid system that uses navmesh and is brainless to be able to follow you easily on ground and off a cliff

    }
    private void RollForComboChance(EnemyManager enemyManager)
    {
        // create a random generator
        float comboChance = Random.Range(0, 100);

        if (enemyManager.allowAIToPerformCombos && comboChance <= enemyManager.comboLikelihood)
        {
            // only perform combo if attack has calid combo setup
            if (currentAttack.comboAction != null)
            {
                willDoComboOnNextAttack = true;
                currentAttack = currentAttack.comboAction;
            }
            else
            {
                willDoComboOnNextAttack = false;
                currentAttack = null;
            }
        }
    }
}
}

                            </pre>
                    </div>
                </div>

                <!-- Player Combat -->
                <div class="accordion">
                        <i class="fas fa-bolt" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">Player Combat Behavior</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                <div class="accordion-inner">
                        <p>I developed a combat system with a series of combat colliders that detect various forms of damage.</p>
                        <li>Damage Collider: general collider for when characters are hit</li>
                        <li>Spell Damage Collider: detects spell damage and elemental damage types (fire, poison, physical)</li>
                        <li>Bomb Damage Collider: impacts characters in a radius of explosion and adjusts damage based on proximity to blast impact</li>
                        <li>Blocking Collider: detects when character is blocking and receive reduced damaged based on shield stats and stagger attacker if timed correctly</li>
                        <li>Critical Damage Collider: detects when a critical attack is attempted and possible; allows for special assassination animation</li>
                        <li>Posion: poisons character with a damage-over-time status after a limit of poison resistance is reached</li>
                    <br>
                    <div class="accordion">
                            <i class="fa fa-code" aria-hidden="true"></i>
                            <span style="margin-left: 5px;">CODE SNIPPET - Bomb Damage Collider</span>
                            <div class="accordion-icon">
                                <i class="fa fa-times" aria-hidden="true"></i>
                            </div>
                        </div>
                        <div class="accordion-inner">
                            <p>The following code demonstrates the code used for bomb damage</p>
                            <pre class="prettyprint lang-csharp">

   public class BombDamageCollider : DamageCollider
{
   [Header("Explosive Damage & Radius")]
   public int explosiveRadius = 1;
   public int explosionDamage;
   public int explosionSplashDamage; // other damage types etc

   public Rigidbody bombRigidbody;
   private bool hasCollided = false;
   public GameObject impactParticles;

   protected override void Awake()
   {
      damageCollider = GetComponent<Collider>();
      bombRigidbody = GetComponent<Rigidbody>();
   }

   private void OnCollisionEnter(Collision collision)
   {
      if (!hasCollided)
      {
         hasCollided = true;
         impactParticles = Instantiate(impactParticles, transform.position, Quaternion.identity);
         Explode();

         CharacterStatsManager character = collision.transform.GetComponent<CharacterStatsManager>();

         if (character != null)
         {
            if (character.teamIDNumber != teamIDNumber)
            {
               // check for friendly fire
               character.TakeDamage(physicalDamage, explosionDamage, true);
            }
         }

         Destroy(impactParticles, 5f);
        Destroy(transform.parent.gameObject);
      }
   }

   private void Explode()
   {
      // iterate through characters in radius to deal damage to
      Collider[] characters = Physics.OverlapSphere(transform.position, explosiveRadius);
      foreach (Collider objectsInExplosion in characters)
      {
         CharacterStatsManager character = objectsInExplosion.GetComponent<CharacterStatsManager>();
         if (character != null)
         {
            if (character.teamIDNumber != teamIDNumber)
            {
               // deal fire damage
               character.TakeDamage(0, explosionSplashDamage, true);
            }
         }
      }
   }
}
}
                            </pre>
                        </div>
                    </div>

                <!-- Player Managers-->
                <div class="accordion">
                    <i class="fas fa-user" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Player Character Managers</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed a player system with input and camera behavior managers. Note: Enemies have corresponding modularized
                        versions that have similar functionality for non-playable characters.</p>
                    <li>Camera Manager: Determines camera behavior when player is moving or locking onto enemy targets</li>
                    <li>Input Handler: Determines input behavior based on states and defined inputs</li>
                    <li>Player Animator Manager: determines which animations and overlays will play based on player state (attacking, blocking, sprinting, etc)</li>
                    <li>Player Combat Manager: determines enemy "teams", player combat states (attacking, blocking, dying, staggering, etc), enemy lock on targets, and available
                        attacks based on current weapons, stamina, and magic</li>
                    <li>Player Effects Manager: instantiates blood splatter and fire effects</li>
                    <li>Player Inventory Manager: holds UI information for left hand, right hand, current spell, current consumable, pause menu, and picked-up items</li>
                    <li>Player Stats Manager: holds health, stamina, magic, experience points, and poise (likelihood to stagger from enemy attack). Player shrugs when out of stamina or magic</li>
                    <li>Player Equipment Manager: holds equipment information for inventory and combat use</li>
                    <li>Player Locomotion Manager: holds movement behavior data based on combat and movement behavior such as dodging, jumping, sprinting, etc. </li>
                    <br>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Input Handler</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates input handling for movement, attacks, and consumables in various game contexts </p>
                        <pre class="prettyprint lang-csharp">
    public class InputHandler : MonoBehaviour
    {
        public float horizontal;
        public float vertical;
        public float moveAmount;
        public float mouseX;
        public float mouseY;

        public bool aInput;
        public bool b_input;
        public bool consume_Input;
        public bool y_Input;
        public bool rightbumper_Input;
        public bool righttrigger_Input;
        public bool leftbumper_Input;
        public bool lefttrigger_Input;
        public bool critical_Attack_Input;
        public bool jump_Input;
        public bool inventory_Input;
        public bool lockOn_Input;

        public bool rightStick_Right_Input;
        public bool rightStick_Left_Input;

        public bool d_Pad_Up;
        public bool d_Pad_Down;
        public bool d_Pad_Left;
        public bool d_Pad_Right;

        public bool rollFlag;
        public bool twoHandFlag;
        public bool sprintFlag;
        public bool comboFlag;
        public bool lockOnFlag;
        public bool inventoryFlag;
        public float rollInputTimer;

        // need a specific transform for critical attack (or else raycast will come from ground (default))
        public Transform criticalAttackRaycatStartPoint;

        private PlayerControls inputActions;
        private PlayerCombatManager playerCombatManager;
        private PlayerInventoryManager playerInventoryManager;
        private PlayerManager playerManager;
        private PlayerFXManager playerFXManager;
        private PlayerStatsManager playerStatsManager;
        private BlockingCollider blockingCollider;
        private PlayerWeaponSlotManager playerWeaponSlotManager;
        private CameraHandler cameraHandler;
        private PlayerAnimatorManager playerAnimatorManager;
        private UIManager uIManager;

        private Vector2 movementInput;
        private Vector2 cameraInput;

        private void Awake()
        {
            playerCombatManager = GetComponent<PlayerCombatManager>();
            playerInventoryManager = GetComponent<PlayerInventoryManager>();
            playerManager = GetComponent<PlayerManager>();
            playerFXManager = GetComponent<PlayerFXManager>();
            playerStatsManager = GetComponent<PlayerStatsManager>();
            // calling this bc we must reload weapons on addition of new wepon
            playerWeaponSlotManager = GetComponent<PlayerWeaponSlotManager>();
            blockingCollider = GetComponentInChildren<BlockingCollider>();
            cameraHandler = FindObjectOfType<CameraHandler>();
            playerAnimatorManager = GetComponent<PlayerAnimatorManager>();
            uIManager = FindObjectOfType<UIManager>();
        }

        public void OnEnable()
        {
            if (inputActions == null)
            {
                inputActions = new PlayerControls();
                inputActions.PlayerMovement.Movement.performed +=
                    inputActions => movementInput = inputActions.ReadValue<Vector2>();
                inputActions.PlayerMovement.Camera.performed += i => cameraInput = i.ReadValue<Vector2>();

                inputActions.PlayerActions.SelectButton.performed += inputActions => aInput = true;

                // handle attack input
                inputActions.PlayerActions.RB.performed += i => rightbumper_Input = true;
                inputActions.PlayerActions.RT.performed += i => righttrigger_Input = true;
                inputActions.PlayerActions.LeftBumper.performed += i => leftbumper_Input = true;
                inputActions.PlayerActions.LeftBumper.canceled += i => leftbumper_Input = false;
                inputActions.PlayerActions.LeftTrigger.performed += inputActions => lefttrigger_Input = true;

                // handle quick slot
                inputActions.PlayerActions.DPadRight.performed += i => d_Pad_Right = true;
                inputActions.PlayerActions.DPadLeft.performed += i => d_Pad_Left = true;

                // handle select
                inputActions.PlayerActions.SelectButton.performed += i => aInput = true;
                inputActions.PlayerActions.X.performed += i => consume_Input = true;
                // handle roll input
                // when input is cancelled
                inputActions.PlayerActions.Roll.performed += i => b_input = true;
                inputActions.PlayerActions.Roll.canceled += i => b_input = false;

                // handle jump input
                inputActions.PlayerActions.Jump.performed += i => jump_Input = true;

                //handle inventory input
                inputActions.PlayerActions.Inventory.performed += i => inventory_Input = true;

                // handle lock on input
                inputActions.PlayerActions.LockOn.performed += i => lockOn_Input = true;

                //handle lock on right and left
                inputActions.PlayerMovement.LockOnTargetRight.performed += i => rightStick_Right_Input = true;
                inputActions.PlayerMovement.LockOnTargetLeft.performed += i => rightStick_Left_Input = true;

                //handle
                inputActions.PlayerActions.Y.performed += i => y_Input = true;

                // handle critical attack
                inputActions.PlayerActions.CriticalAttack.performed += i => critical_Attack_Input = true;

                Debug.DrawRay(criticalAttackRaycatStartPoint.position,transform.TransformDirection(Vector3.forward), Color.red, 0.5f);

            }

            inputActions.Enable();
        }

        private void OnDisable()
        {
            inputActions.Disable();
        }

        public void TickInput(float delta)
        {
            if (playerStatsManager.isDead)
            {
                return;
            }
            HandleMoveInput(delta);
            HandleRollInput(delta);
            HandleCombatInput(delta);
            HandleQuickSlotInput();
            HandleInventoryInput();
            HandleLockOnInput();
            HandleTwoHandInput();
            HandleCriticalAttackInput();
            HandleConsumableInput();
        }

        public void HandleMoveInput(float delta)
        {
            horizontal = movementInput.x;
            vertical = movementInput.y;
            moveAmount = Mathf.Clamp01(Mathf.Abs(horizontal) + Mathf.Abs(vertical));
            mouseX = cameraInput.x;
            mouseY = cameraInput.y;
        }

        private void HandleRollInput(float delta)
        {
            // will detect when key is pressed and make bool true
            //b_input = inputActions.PlayerActions.Roll.phase == UnityEngine.InputSystem.InputActionPhase.Started;
            //b_input = inputActions.PlayerActions.Roll.IsPressed();

            if (b_input)
            {
                rollInputTimer += delta;
                if (playerStatsManager.currentStamina <= 0)
                {
                    b_input = false;
                    sprintFlag = false;
                }

                if (moveAmount > 0.5f && playerStatsManager.currentStamina > 0)
                {
                    sprintFlag = true;
                }
            }
            else
            {
                sprintFlag = false;

                // tapping b
                if (rollInputTimer > 0 && rollInputTimer < 0.5f)
                {
                    rollFlag = true;
                }

                //reset the timer
                rollInputTimer = 0;
            }
        }

        private void HandleCombatInput(float delta)
        {
            if (rightbumper_Input == true)
            {
                playerCombatManager.HandleRBAction();
            }
            if (righttrigger_Input == true)
            {
                playerCombatManager.HandleHeavyAttack(playerInventoryManager.rightWeapon);
            }


            if (lefttrigger_Input)
            {
                // if two handing handle weapon animation
                if (twoHandFlag)
                {
                    // else handle light attack if melee weapon handle weapon art
                    // handle sheild attack
                }
                else
                {
                    playerCombatManager.HandleLTAction();
                }
            }
            if (leftbumper_Input)
            {
                // do a block
                playerCombatManager.HandleLBAction();
            }
            else
            {
                playerManager.isBlocking = false;
                if (blockingCollider.blockingBoxCollider.enabled)
                {
                    blockingCollider.DisableBlockingCollider();
                }
            }
        }

        private void HandleQuickSlotInput()
        {
            if (d_Pad_Right)
            {
                playerInventoryManager.ChangeRightWeapon();
            }
            else if (d_Pad_Left)
            {
                playerInventoryManager.ChangeLeftWeapon();
            }
        }

        private void HandleInventoryInput()
        {
            if (inventory_Input)
            {
                inventoryFlag = !inventoryFlag;
                if (inventoryFlag)
                {
                    uIManager.OpenSelectWindow();
                    uIManager.UpdateUI();
                    uIManager.hudWindow.SetActive(false);
                }
                else
                {
                    uIManager.CloseSelectWindow();
                    uIManager.CloseAllInventoryWindows();
                    uIManager.hudWindow.SetActive(true);
                }
            }

        }

        private void HandleLockOnInput()
        {
            // if no target is currently locked on
            if (lockOn_Input && lockOnFlag == false)
            {
                lockOn_Input = false;
                // find nearest lock on target to move camer to
                cameraHandler.HandleLockOn();
                if (cameraHandler.nearestLockOnTarget != null)
                {
                    cameraHandler.currentLockOnTarget = cameraHandler.nearestLockOnTarget;
                    lockOnFlag = true;
                }
            }
            else if (lockOn_Input && lockOnFlag)
            {
                lockOn_Input = false;
                lockOnFlag = false;
                cameraHandler.ClearLockOnTargets();
            }

            if (lockOnFlag && rightStick_Left_Input)
            {
                rightStick_Left_Input = false;
                cameraHandler.HandleLockOn();
                if (cameraHandler.leftLockTarget != null)
                {
                    // assign current lock on target to target in left
                    cameraHandler.currentLockOnTarget = cameraHandler.leftLockTarget;
                }
            }

            else if (lockOnFlag && rightStick_Right_Input)
            {
                rightStick_Right_Input = false;
                cameraHandler.HandleLockOn();
                if (cameraHandler.rightLockTarget != null)
                {
                    // assign current lock on target to target in right
                    cameraHandler.currentLockOnTarget = cameraHandler.rightLockTarget;
                }
            }
            cameraHandler.SetCameraHeight();
        }

        private void HandleTwoHandInput()
        {
            if (y_Input)
            {
                // switch to false so that it activates only once per frame
                y_Input = false;
                // switch state of flag
                twoHandFlag = !twoHandFlag;
                if (twoHandFlag)
                {
                    //enable two handed w. right weapon
                    playerManager.isTwoHandingWeapon = true;
                    playerWeaponSlotManager.LoadWeaponOnSlot(playerInventoryManager.rightWeapon, false);
                    playerWeaponSlotManager.LoadTwoHandIKTargets(true);
                }
                else
                {
                    //disable two handed
                    playerManager.isTwoHandingWeapon = false;
                    playerWeaponSlotManager.LoadWeaponOnSlot(playerInventoryManager.rightWeapon, false);
                    playerWeaponSlotManager.LoadWeaponOnSlot(playerInventoryManager.leftWeapon, true);
                    playerWeaponSlotManager.LoadTwoHandIKTargets(false);
                }
            }
        }

        private void HandleCriticalAttackInput()
        {
            if (critical_Attack_Input)
            {
                // disable after use
                critical_Attack_Input = false;
                playerCombatManager.AttemptBackstabOrRiposte();
            }
        }

        private void HandleConsumableInput()
        {
            if (consume_Input)
            {
                consume_Input = false;
                // sue current consumable
                playerInventoryManager.currentConsumableItem.AttemptToConsumeItem(playerAnimatorManager, playerWeaponSlotManager, playerFXManager);
            }
        }
    }
}

                            </pre>
                    </div>
                </div>

                <!-- Items -->
                <div class="accordion">
                    <i class="fas fa-glass-martini" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Items (weapons, armor, consumables)</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed an item system collection system where weapons
                        and consumables can be collected and appear in chests, producing a sparkle effect until collected. Each item has its own consume animation an effects.
                        Weapons and consumables exist as scriptable objects with customizable damage, animaitons, and meshes. Equipment can be equipped and replaced.
                        Consumable and equipment types include:</p>
                    <li>Bomb: a throwable object that explodes on impact with modifiable arc, damage, and explosion</li>
                    <li>Cure: a potion that heals health and stops poison effects</li>
                    <li>Flask: a potion that heals magic and boosts regeneration</li>
                    <li>Equipment Items: Helmet, Feet, Torso, Legs, Hands</li>
                    <br>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Bomb Item</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates bomb item functionality</p>
                        <pre class="prettyprint lang-csharp">

public class BombConsumableItem : ConsumableItem
{
    [Header("Velocity")]
    public int upwardVelocity = 50;
    public int forwardVelocity = 50;
    public int bombMass = 1;

    [Header("Live Bomb Model")]
    public GameObject liveBombModel;

    [Header("Base Damage")]
    public int baseDamage = 200;
    public int explosiveDamage = 75;

    public override void AttemptToConsumeItem(PlayerAnimatorManager playerAnimatorManager, PlayerWeaponSlotManager playerWeaponSlotManager,
        PlayerFXManager playerFXManager)
    {
        if (currentItemAmount > 0)
        {
            playerWeaponSlotManager.rightHandSlot.UnloadWeapon();
            playerAnimatorManager.PlayTargetAnimation(consumeAnimation,true);
            GameObject bombModel = Instantiate(itemModel, playerWeaponSlotManager.rightHandSlot.transform.position,
                Quaternion.identity, playerWeaponSlotManager.rightHandSlot.transform);
            playerFXManager.instantiatedFXModel = bombModel;
        }
        else
        {
            playerAnimatorManager.PlayTargetAnimation("Shrugging", true);
        }
    }
}
                            </pre>
                    </div>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Equipment Model Changer</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates template equipment change functionality</p>
                        <pre class="prettyprint lang-csharp">

    public class EquipmentModelChanger : MonoBehaviour
    {
        public List<GameObject> bodyPartModels;

        private void Awake()
        {
            GetAllBodyPartModels();
        }

        private void GetAllBodyPartModels()
        {
            int childrenGameObjects = transform.childCount;
            for (int i = 0; i < childrenGameObjects; i++)
            {
                bodyPartModels.Add(transform.GetChild(i).gameObject);
            }
        }

        public void UnequipAllBodyPartModels()
        {
            foreach (GameObject torsoModel in bodyPartModels)
            {
                torsoModel.SetActive(false);
            }
        }

        public void EquipBodyPartModelByName(string bodyPartName)
        {
            for (int i = 0; i < bodyPartModels.Count; i++)
            {
                if (bodyPartModels[i].name == bodyPartName)
                {
                    bodyPartModels[i].SetActive(true);
                }
            }
        }
    }</pre>
                    </div>
                </div>

                <!-- UI -->
                <div class="accordion">
                    <i class="fas fa-hand-pointer" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">User Interface</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed a user interface system with a pause menu with three options and in-game UI.</p>
                    <li>Inventory: view current inventory items, replace and equip new ones</li>
                    <li>Game Settings: template buttons for volume and language</li>
                    <li>Equipped Items: view character items</li>
                    <li>Pop Up UI: pop up messages that show item icon and name</li>
                    <li>Quick Slots: cyclable items to use in combat and gameplay for left and right hand, spell, and consumable.</li>
                    <li>Player Stats: Health, Magic, Stamina, Experience, Current Poison Effects</li>
                    <br>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - UI Manager</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code shows in-game player UI</p>
                        <pre class="prettyprint lang-csharp">public class UIManager : MonoBehaviour
{
    [HideInInspector] public PlayerInventoryManager playerInventoryManager;
    public EquipmentWindowUI equipmentWindowUI;
    public QuickSlotsUI quickSlotsUI;

    [Header("UI Windows")]
    public GameObject hudWindow;
    public GameObject selectWindow;
    public GameObject equipmentScreenWindow;
    public GameObject weaponInventoryWindow;

    [Header("Equipment Window Slot Selected")]
    public bool rightHandSlot01Selected;
    public bool rightHandSlot02Selected;
    public bool leftHandSlot01Selected;
    public bool leftHandSlot02Selected;

    [Header("Weapon Inventory")]
    public GameObject weaponInventorySlotPrefab;
    public Transform weaponInventorySlotsParent;
    private WeaponInventorySlot[] weaponInventorySlots;


    private void Awake()
    {
        playerInventoryManager = FindObjectOfType<PlayerInventoryManager>();
        quickSlotsUI = GetComponentInChildren<QuickSlotsUI>();
        //TODO: Unity doesnt like this:
        //equipmentWindowUI = FindObjectOfType<EquipmentWindowUI>();
    }

    private void Start()
    {
        weaponInventorySlots = weaponInventorySlotsParent.GetComponentsInChildren<WeaponInventorySlot>();
        // load weapons on screen
        equipmentWindowUI.LoadWeaponOnEquipmentScreen(playerInventoryManager);
        quickSlotsUI.UpdateCurrentSpellIcon(playerInventoryManager.currentSpell);
        quickSlotsUI.UpdateCurrentConsumableIcon(playerInventoryManager.currentConsumableItem);

    }

    public void UpdateUI()
    {
        #region Weapon Inventory Slots
        for (int i = 0; i < weaponInventorySlots.Length; i++)
        {
            if (i < playerInventoryManager.weaponsInventory.Count)
            {
                if (weaponInventorySlots.Length < playerInventoryManager.weaponsInventory.Count)
                {
                    // instantiate a prefab
                    Instantiate(weaponInventorySlotPrefab, weaponInventorySlotsParent);
                    weaponInventorySlots = weaponInventorySlotsParent.GetComponentsInChildren<WeaponInventorySlot>();
                }
                weaponInventorySlots[i].AddItem(playerInventoryManager.weaponsInventory[i]);
            }
            else
            {
                weaponInventorySlots[i].ClearInventorySLot();
            }
        }
        #endregion
    }
    public void OpenSelectWindow()
    {
        selectWindow.SetActive(true);
    }

    public void CloseSelectWindow()
    {
        selectWindow.SetActive(false);
    }

    public void CloseAllInventoryWindows()
    {
        ResetAllSelectedSlots();
        weaponInventoryWindow.SetActive(false);
        equipmentScreenWindow.SetActive(false);
    }

    public void ResetAllSelectedSlots()
    {
        rightHandSlot01Selected = false;
        rightHandSlot02Selected = false;
        leftHandSlot01Selected = false;
        leftHandSlot02Selected = false;

    }
}
                            </pre>
                    </div>
                </div>

                <!-- Inventory -->
                <div class="accordion">
                    <i class="fas fa-luggage-cart" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Inventory</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed an inventory system with weapon slots, inventory consumable slots, and item pick up funcitonality.</p>

                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Inventory Manager</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates the code used</p>
                        <pre class="prettyprint lang-csharp">

 public class PlayerInventoryManager : CharacterInventoryManager
    {

        public List<WeaponItem> weaponsInventory;

        public void ChangeRightWeapon()
        {

            currentRightWeaponIndex = currentRightWeaponIndex + 1;

            if (currentRightWeaponIndex > weaponsInRightHandSlots.Length - 1)
            {
                currentRightWeaponIndex = -1;
                rightWeapon = characterWeaponSlotManager.unarmedWeapon;
                characterWeaponSlotManager.LoadWeaponOnSlot(characterWeaponSlotManager.unarmedWeapon, false);
            }
            else if (weaponsInRightHandSlots[currentRightWeaponIndex] != null)
            {
                rightWeapon = weaponsInRightHandSlots[currentRightWeaponIndex];
                characterWeaponSlotManager.LoadWeaponOnSlot(weaponsInRightHandSlots[currentRightWeaponIndex], false);
            }
            else
            {
                currentRightWeaponIndex = currentRightWeaponIndex + 1;
            }

        }
        public void ChangeLeftWeapon()
        {
            currentLeftWeaponIndex = currentLeftWeaponIndex + 1;

            if (currentLeftWeaponIndex > weaponsInLeftHandSlots.Length - 1)
            {
                currentLeftWeaponIndex = -1;
                leftWeapon = characterWeaponSlotManager.unarmedWeapon;
                characterWeaponSlotManager.LoadWeaponOnSlot(characterWeaponSlotManager.unarmedWeapon, true);
            }
            else if (weaponsInLeftHandSlots[currentLeftWeaponIndex] != null)
            {
                leftWeapon = weaponsInLeftHandSlots[currentLeftWeaponIndex];
                characterWeaponSlotManager.LoadWeaponOnSlot(weaponsInLeftHandSlots[currentLeftWeaponIndex], true);
            }
            else
            {
                currentLeftWeaponIndex = currentLeftWeaponIndex + 1;
            }
        }

    }
                            </pre>
                    </div>
                </div>

                <!-- Events -->
                <div class="accordion">
                    <i class="fas fa-clock" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Events</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed several events systems that trigger on command.</p>
                    <li>Open Chest: player opens chest and collects item</li>
                    <li>Enter Boss Arena: player enters an arena by diving over fire and is blocked from re-entering</li>
<li>Fog Wall/Illusionary Door: a pathway is blocked by fog until player steps through</li>
                   <br>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Disappearing Door/Wall</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates a triggered disappearing door functionality</p>
                        <pre class="prettyprint lang-csharp">

public class IllusionaryDoor : MonoBehaviour
{
    public bool doorHasBeenHit;
    public Material illusionaryDoorMaterial;
    public float alpha;
    public float fadeTimer = 2.5f;

    public BoxCollider doorCollider;
    public AudioSource audioSource;
    public AudioClip illusionaryDoorSound;

    private void Awake()
    {
        doorCollider = GetComponent<BoxCollider>();
        illusionaryDoorMaterial = GetComponent<Material>();
        audioSource = GetComponent<AudioSource>();
    }

    private void Update()
    {
        if (doorHasBeenHit)
        {
            FadeIllusionaryDoor();
        }
    }

    public void FadeIllusionaryDoor()
    {
        alpha = illusionaryDoorMaterial.color.a;
        alpha = alpha - Time.deltaTime / fadeTimer;
        // color will keep changing over time, only chage transperancy
        Color fadeDoorColor = new Color(1, 1, 1, alpha);
        illusionaryDoorMaterial.color = fadeDoorColor;

        if (doorCollider.enabled)
        {
            doorCollider.enabled = false;
            audioSource.PlayOneShot(illusionaryDoorSound);
        }

        // detroy object when its faded
        if (alpha <= 0)
        {
            Destroy(this);
        }
    }
}
                            </pre>
                    </div>

                </div>

                <!-- Managers -->
                <div class="accordion">
                    <i class="fas fa-chart-bar" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Misc Gameplay Managers</span>
                    <div class="accordion-icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </div>
                </div>
                <div class="accordion-inner">
                    <p>I developed a series of managers to modularize all characters' inventories, locomotion, animation, effects, stats, UI, and behavior.</p>
                    <div class="accordion">
                        <i class="fa fa-code" aria-hidden="true"></i>
                        <span style="margin-left: 5px;">CODE SNIPPET - Character Manager</span>
                        <div class="accordion-icon">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="accordion-inner">
                        <p>The following code demonstrates the code used</p>
                        <pre class="prettyprint lang-csharp">

public class CharacterManager : MonoBehaviour
{
   private CharacterAnimatorManager characterAnimatorManager;
   private CharacterWeaponSlotManager characterWeaponSlotManager;
   [Header("Lock On Transform")]
   public Transform lockOnTransform;

   [Header("Combat Collider")]
   public CriticalDamageCollider backstabCollider;
   public CriticalDamageCollider riposteCollider;

   [Header("Interaction")]
   public bool isInteracting;

   [Header("Combat Flags")]
   public bool canBeRiposted;
   public bool canBeParried;
   public bool canDoCombo;
   public bool isParrying;
   public bool isBlocking;
   public bool isInvulnerable;
   public bool isUsingRightHand;
   public bool isUsingLeftHand;
   public bool isTwoHandingWeapon;

   [Header("Movement Flags")]
   public bool isRotatingWithRootMotion;
   public bool canRotate;
   public bool isSprinting;
   public bool isGrounded;
   public bool isInAir;

   [Header("Spells")]
   public bool isFiringSpell;

   // damage will be inflicted during an animation event
   // used in backstab or riposte animations
   public int pendingCriticalDamage;

   protected virtual void Awake()
   {
      characterAnimatorManager = GetComponent<CharacterAnimatorManager>();
      characterWeaponSlotManager = GetComponent<CharacterWeaponSlotManager>();
   }
   protected virtual void FixedUpdate()
   {
      // reset two handing status if need be
      characterAnimatorManager.CheckHandIKWeight(characterWeaponSlotManager.rightHandIKTarget, characterWeaponSlotManager.leftHandIKTarget, isTwoHandingWeapon);
   }
}
                            </pre>
                    </div>
                </div>
                <br>

                <ul class="actions" style="flex-direction: row; flex-wrap: wrap">
                    <li><a href="https://github.com/connortwall/Personal-RPG-Project/tree/main/Assets/Scripts"
                           class="button icon solid brands fa-github">Github (Unity)</a></li>
                </ul>

            </div>
        </section>

        <!-- Gameplay -->
        <!--<section id="gameplay">
            <div class="inner">
                <header class="major">
                    <h1>Gameplay</h1>
                </header>

                <ul class="actions" style="flex-direction: row; flex-wrap: wrap">
                     <li><a href="https://github.com/connortwall/Personal-RPG-Project/tree/main/Assets/Scripts"
                           class="button icon solid brands fa-github">Github (Unity)</a></li>
                </ul>
            </div>
        </section>-->
    </div>


    <!-- Footer -->
    <footer id="footer">
        <div class="inner">
            <header class="major">
                <h1>Get in Touch</h1>
            </header>
            <ul class="actions" style="flex-direction: row; flex-wrap: wrap">
                <li>
                    <a href="CV.html" class="button icon solid fa-clipboard-list">
										<span style="color: #B664B0; background-image: linear-gradient(135deg, #6699FF 0%, #FF3366 100%);
										 -webkit-background-clip: text; -webkit-text-fill-color:transparent; -webkit-box-decoration-break: clone;
										background-repeat: no-repeat;">CV<span class="label"></span>
										</span>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/connortwall" class="button icon solid brands fa-github">
										<span style="color: #B664B0; background-image: linear-gradient(135deg, #6699FF 0%, #F7AEF8 100%);
										 -webkit-background-clip: text; -webkit-text-fill-color: transparent; -webkit-box-decoration-break: clone;
										background-repeat: no-repeat;">Github<span class="label"></span>
										</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/connortwall/" class="button icon solid brands fa-linkedin-in">
										<span style="color: #B664B0; ">
											<span style="background-image: linear-gradient(135deg, #6699FF 0%, #F7AEF8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; -webkit-box-decoration-break: clone; background-repeat: no-repeat;">LinkedIn<span
                                                    class="label"></span>
											</span>
										</span>
                    </a>
                </li>
                <li>
                    <a href="https://connorthewall.itch.io" class="button icon solid fa-gamepad">
										<span style="color: #B664B0; ">
											<span style="background-image: linear-gradient(135deg, #6699FF 0%, #F7AEF8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; -webkit-box-decoration-break: clone; background-repeat: no-repeat;">Itch.io<span
                                                    class="label"></span>
											</span>
										</span>
                    </a>
                </li>
            </ul>
            <ul class="copyright">
                <li>&copy; <i>Website coded and designed </i> by Connor Wall</li>
            </ul>
        </div>
    </footer>
</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
</body>
</html>
